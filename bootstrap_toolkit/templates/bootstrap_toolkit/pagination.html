{% with bootstrap_pagination_url=bootstrap_pagination_url|default:"?" %}

    <div class="{{ pagination_css_classes }}">
        <ul>

            {% if show_prev_and_next %}
                <li class="prev{% if current_page == 1 %} disabled{% endif %}">
                    <a href="{% if current_page == 1 %}#{% else %}{{ bootstrap_pagination_url }}page={{ current_page|add:'-1' }}{% endif %}">&larr;</a>
                </li>
            {% endif %}
            {% if always_show_first %}
                {% if  1 not in pages_shown %}
                    <li>
                        <a href="{{ bootstrap_pagination_url }}page=1">1</a>
                    </li>
                {% endif %}
            {% else %}
                <li class="prev{% if current_page == 1 %} disabled{% endif %}">
                    <a href="{% if current_page == 1 %}#{% else %}{{ bootstrap_pagination_url }}page=1{% endif %}">&laquo;</a>
                </li>
            {% endif %}

            {% if pages_back %}
                <li>
                    <a href="{{ bootstrap_pagination_url }}page={{ pages_back }}">&hellip;</a>
                </li>
            {% endif %}

            {% for p in pages_shown %}
                <li{% if current_page == p %} class="active"{% endif %}>
                    <a href="{% if current_page == p %}#{% else %}{{ bootstrap_pagination_url }}page={{ p }}{% endif %}">{{ p }}</a>
                </li>
            {% endfor %}

            {% if pages_forward %}
                <li>
                    <a href="{{ bootstrap_pagination_url }}page={{ pages_forward }}">&hellip;</a>
                </li>
            {% endif %}

            {% if always_show_last %}
                {% if num_pages not in pages_shown %}
                    <li>
                        <a href="{{ bootstrap_pagination_url }}page={{ num_pages }}">{{ num_pages }}</a>
                    </li>
                {% endif %}
            {% else %}
                <li class="last{% if current_page == num_pages %} disabled{% endif %}">
                    <a href="{% if current_page == num_pages %}#{% else %}{{ bootstrap_pagination_url }}page={{ num_pages }}{% endif %}">&raquo;</a>
                </li>
            {% endif %}

            {% if show_prev_and_next %}
                <li class="next{% if current_page == num_pages %} disabled{% endif %}">
                    <a href="{% if current_page == num_pages %}#{% else %}{{ bootstrap_pagination_url }}page={{ current_page|add:'1' }}{% endif %}">&rarr;</a>
                </li>
            {% endif %}
        </ul>

    </div>

{% endwith %}
